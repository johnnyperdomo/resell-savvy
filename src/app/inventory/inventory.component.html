<div class="navbar navbar-vertical fixed-left navbar-expand-md navbar-light">
  <app-navbar></app-navbar>
</div>

<!-- LATER: Change alot of 'a' links to routerlinks -->
<!-- LATER: Pagination -->
<!-- LATER: make table look better on mobile view -->
<!-- Header -->
<div class="main-content">
  <div class="container-fluid">
    <!-- <app-pricing-modal></app-pricing-modal> -->

    <div class="row justify-content-center">
      <div class="col-12">
        <div class="header">
          <div class="header-body">
            <div class="row align-items-center">
              <div class="col">
                <!-- Title -->
                <h1 class="header-title">Inventory</h1>
              </div>
              <div class="col-auto">
                <!-- Button -->
                <a href="#!" class="btn btn-primary lift"> New Item </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Stats Overview -->
    <div class="row">
      <div class="col-12 col-sm-6 col-lg-3">
        <div class="card">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="col">
                <!-- Title -->
                <h6 class="text-uppercase text-muted mb-2">
                  Items In Inventory
                </h6>

                <!-- Heading -->
                <span class="h2 mb-0"> {{ itemsInInventory }} </span>
              </div>

              <div class="col-auto">
                <span class="h2 fe fe-shopping-cart text-muted mb-0"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-12 col-sm-6 col-lg-3">
        <div class="card">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="col">
                <!-- Title -->
                <h6 class="text-uppercase text-muted mb-2">Active Listings</h6>

                <!-- Heading -->
                <span class="h2 mb-0"> {{ activeListings }} </span>
              </div>

              <div class="col-auto">
                <span class="h2 fe fe-check-circle text-muted mb-0"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-12 col-sm-6 col-lg-3">
        <div class="card">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="col">
                <!-- Title -->
                <h6 class="text-uppercase text-muted mb-2">Sold Items</h6>

                <!-- Heading -->
                <span class="h2 mb-0"> {{ soldItems }} </span>
              </div>

              <div class="col-auto">
                <span class="h2 fe fe-shopping-bag text-muted mb-0"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-12 col-sm-6 col-lg-3">
        <div class="card">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="col">
                <!-- Title -->
                <h6 class="text-uppercase text-muted mb-2">Total Sales</h6>

                <!-- Heading -->
                <span class="h2 mb-0">${{ totalSales }} </span>
              </div>

              <div class="col-auto">
                <span class="h2 fe fe-dollar-sign text-muted mb-0"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- List -->

    <div class="mt-3">
      <!-- Products -->
      <div class="card">
        <!-- Card Header -->
        <div class="card-header">
          <div class="row align-items-center">
            <div class="col">
              <form>
                <div class="input-group input-group-flush">
                  <div class="input-group-prepend">
                    <span class="input-group-text">
                      <i class="fe fe-search"></i>
                    </span>
                  </div>
                  <input
                    class="list-search form-control"
                    type="search"
                    placeholder="Search by Title"
                    (keyup)="onSearchKey($event)"
                  />
                </div>
              </form>
            </div>
          </div>
        </div>
        <div class="table-responsive mb-0" id="productsList">
          <table class="table table-sm table-hover card-table">
            <thead>
              <tr>
                <th scope="col">Item</th>
                <th scope="col">Status</th>
                <th scope="col">Price</th>
                <th scope="col">Cost</th>
                <th scope="col">Date</th>
                <th colspan="2" scope="col  text-right ">Marketplaces</th>
              </tr>
            </thead>
            <tbody class="list">
              <tr *ngFor="let item of filteredItems">
                <td class="products-product">
                  <div class="d-flex align-items-center">
                    <!-- Image -->
                    <div class="avatar">
                      <img
                        class="avatar-img rounded mr-3"
                        src="{{ item.imageUrl }}"
                        alt="..."
                      />
                    </div>

                    <div class="ml-3">
                      <!-- Title -->
                      <!-- LATER: make this more responsive -->
                      <h4 class="font-weight-normal mb-1" style="width: 200px">
                        <!-- TODO: Link to row id -->
                        <a href="http://">{{ item.title }}</a>
                      </h4>

                      <!-- SKU -->
                      <small *ngIf="item.sku" class="text-muted"
                        >SKU: {{ item.sku }}</small
                      >
                    </div>
                  </div>
                </td>

                <!-- Status -->
                <td>
                  <span
                    class="badge font-weight-bold text-capitalize"
                    [ngClass]="{
                      'badge-soft-primary': item.status === 'sold',
                      'badge-soft-secondary': item.status === 'draft',
                      'badge-soft-success': item.status === 'active'
                    }"
                    >{{ item.status }}</span
                  >
                </td>
                <!-- Price -->
                <td class="font-weight-bold">${{ item.price }}</td>
                <!-- Cost -->
                <td>${{ item.cost }}</td>
                <!-- Date -->
                <td>{{ item.date }}</td>
                <td class="text-left">
                  <div class="avatar-group">
                    <span
                      *ngFor="let marketplace of item.marketplaces"
                      class="avatar avatar-xs"
                      data-toggle="tooltip"
                      data-placement="top"
                      title="{{ marketplace }}"
                    >
                      <img
                        src="assets/marketplace-logos/{{ marketplace }}.png"
                        class="avatar-img rounded-circle"
                        alt="{{ marketplace }}"
                      />
                    </span>
                    <!-- <span
                      class="avatar avatar-xs"
                      data-toggle="tooltip"
                      title=""
                      data-original-title="Dianna Smiley"
                    >
                      <img
                        src="https://images.unsplash.com/photo-1576871337622-98d48d1cf531?ixid=MXwxMjA3fDB8MHxzZWFyY2h8Mnx8dHNoaXJ0fGVufDB8fDB8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60"
                        class="avatar-img rounded-circle"
                        alt="..."
                      />
                    </span>
                    <span
                      class="avatar avatar-xs"
                      data-toggle="tooltip"
                      title=""
                      data-original-title="Dianna Smiley"
                    >
                      <img
                        src="https://images.unsplash.com/photo-1576871337622-98d48d1cf531?ixid=MXwxMjA3fDB8MHxzZWFyY2h8Mnx8dHNoaXJ0fGVufDB8fDB8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60"
                        class="avatar-img rounded-circle"
                        alt="..."
                      />
                    </span>
                    <span
                      class="avatar avatar-xs"
                      data-toggle="tooltip"
                      title=""
                      data-original-title="Dianna Smiley"
                    >
                      <img
                        src="https://images.unsplash.com/photo-1576871337622-98d48d1cf531?ixid=MXwxMjA3fDB8MHxzZWFyY2h8Mnx8dHNoaXJ0fGVufDB8fDB8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60"
                        class="avatar-img rounded-circle"
                        alt="..."
                      />
                    </span>
                    <span
                      class="avatar avatar-xs"
                      data-toggle="tooltip"
                      title=""
                      data-original-title="Dianna Smiley"
                    >
                      <img
                        src="https://images.unsplash.com/photo-1576871337622-98d48d1cf531?ixid=MXwxMjA3fDB8MHxzZWFyY2h8Mnx8dHNoaXJ0fGVufDB8fDB8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60"
                        class="avatar-img rounded-circle"
                        alt="..."
                      />
                    </span>
                    <span
                      class="avatar avatar-xs"
                      data-toggle="tooltip"
                      title=""
                      data-original-title="Dianna Smiley"
                    >
                      <img
                        src="https://images.unsplash.com/photo-1576871337622-98d48d1cf531?ixid=MXwxMjA3fDB8MHxzZWFyY2h8Mnx8dHNoaXJ0fGVufDB8fDB8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60"
                        class="avatar-img rounded-circle"
                        alt="..."
                      />
                    </span>

                    <span
                      class="avatar avatar-xs"
                      data-toggle="tooltip"
                      title=""
                      data-original-title="Ab Hadley"
                    >
                      <img
                        src="https://images.unsplash.com/photo-1576871337622-98d48d1cf531?ixid=MXwxMjA3fDB8MHxzZWFyY2h8Mnx8dHNoaXJ0fGVufDB8fDB8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60"
                        class="avatar-img rounded-circle"
                        alt="..."
                      />
                    </span>
                    <span
                      class="avatar avatar-xs"
                      data-toggle="tooltip"
                      title=""
                      data-original-title="Adolfo Hess"
                    >
                      <img
                        src="https://images.unsplash.com/photo-1576871337622-98d48d1cf531?ixid=MXwxMjA3fDB8MHxzZWFyY2h8Mnx8dHNoaXJ0fGVufDB8fDB8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60"
                        class="avatar-img rounded-circle"
                        alt="..."
                      />
                    </span>
                    <span
                      class="avatar avatar-xs"
                      data-toggle="tooltip"
                      title=""
                      data-original-title="Daniela Dewitt"
                    >
                      <img
                        src="https://images.unsplash.com/photo-1576871337622-98d48d1cf531?ixid=MXwxMjA3fDB8MHxzZWFyY2h8Mnx8dHNoaXJ0fGVufDB8fDB8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60"
                        class="avatar-img rounded-circle"
                        alt="..."
                      /> -->
                    <!-- </span> -->
                  </div>
                </td>
                <td class="text-right">
                  <!-- Dropdown -->
                  <div class="dropdown">
                    <a
                      href="#"
                      class="dropdown-ellipses dropdown-toggle"
                      role="button"
                      data-toggle="dropdown"
                      aria-haspopup="true"
                      aria-expanded="false"
                    >
                      <i class="fe fe-more-vertical"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right">
                      <!-- TODO: Maybe add more specific items to list -->
                      <!-- TODO: ngif, mark as sold/unmark as sold based on status -->

                      <a
                        href="#!"
                        class="dropdown-item"
                        *ngIf="item.status != 'sold'; else unMarkSold"
                      >
                        Mark as sold
                      </a>
                      <ng-template #unMarkSold>
                        <a href="#!" class="dropdown-item"> Unmark as sold </a>
                      </ng-template>

                      <a href="#!" class="dropdown-item"> Edit </a>
                      <a href="#!" class="dropdown-item"> Delete </a>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
